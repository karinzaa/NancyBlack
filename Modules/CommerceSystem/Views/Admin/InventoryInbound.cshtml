

@inherits NantCom.NancyBlack.NancyBlackRazorViewBase
@{
    Layout = "_admin.cshtml";
    }

    @section Title
    {
    Administration - InventoryInbound
    }
    <div ncb-datacontext table="InventoryInbound">
        <h1 class="page-header">
            Manage InventoryInbound
            <i class="fa fa-spinner fa-circle-o-notch" ng-show="isBusy"></i>
        </h1>

        <div style="margin-bottom: 30px">
            This page helps you manage InventoryInbound in this system.
        </div>

        <alert type="danger">
            This page was auto-generated by NancyBlack Engine on: 11/30/2016 11:38:37 PM <br />
            If you generate this page again, all custom changes will be lost.
            <p class="margin-top: 5px">

                <a class="btn btn-lg btn-danger" href="@(this.RenderContext.Context.Request.Path)?regenerate=true">Generate Again</a>
            </p>
        </alert>

        <div>
            <alert ng-repeat="alert in alerts" type="{{alert.type}}" close="closeAlert($index)">
                {{alert.msg}}
            </alert>
        </div>

        <div class="pull-right">
            <a class="btn btn-primary" href="/tables/InventoryInbound.xlsx" target="_blank">
                <i class="fa fa-download"></i>
                <span>
                    Excel
                </span>
            </a>

            <button class="btn btn-success pull-right"
                    data-toggle="modal" data-target="#InventoryInboundModal"
                    ng-click="object = {}">
                <span class="glyphicon glyphicon-plus-sign"></span>
                <span>
                    InventoryInbound
                </span>
            </button>
        </div>

        <ncb-ngtable tabletemplate="'tablecustomtemplate.html'" modalid="InventoryInboundModal">
        </ncb-ngtable>

        <script type="text/ng-template" id="tablecustomtemplate.html">

            <table id="NcbNgTable"
               ncb-datatable
               class="table table-striped table-hover"
               style="width: 100%"
               ng-table="tableParams"
               show-filter="true">
            
            <tr ng-repeat="item in tableParams.data">
                
                        <td data-title="'__createdAt'"
                            sortable="'__createdAt'">
                            {{item.__createdAt | date:'dd MMMM yyyy, HH:mm' }}
                        </td>
                        <td data-title="'__updatedAt'"
                            sortable="'__updatedAt'">
                            {{item.__updatedAt | date:'dd MMMM yyyy, HH:mm' }}
                        </td>
                        <td>
                            <span ncb-vlookup="Supplier" key="{{item.SupplierId}}">
                            </span>
                        </td>
                        <td data-title="'Items'" 
                            sortable="'Items'">
                            <ul ng-repeat="subitem in item.Items">
                                <li>{{subitem}}</li>
                            </ul>
                        </td>
                        <td data-title="'Attachments'" 
                            sortable="'Attachments'">
                            <ul ng-repeat="subitem in item.Attachments">
                                <li>{{subitem}}</li>
                            </ul>
                        </td>
                <td style="white-space: nowrap">

                    <button class="btn btn-default"
                            ng-click="data.copy(item)">
                        <i class="fa fa-copy"></i>
                    </button>

                    <button class="btn btn-info"
                            data-toggle="modal" data-target="#InventoryInboundModal"
                            ng-click="data.view(item)">
                        <i class="fa fa-edit"></i>
                    </button>
                </td>
            </tr>
        </table>

        </script>

        <ncb-modal id="InventoryInboundModal"
                   title="{{object.id == null ? 'Create InventoryInbound' : 'Edit InventoryInbound'}}"
                   closebutton deletebutton>
            <form role="form" name="InventoryInboundForm">

                <tabset>
                    <tab heading="General">

                                <div class="form-group"
                                     ncb-lookupscope
                                     table="Supplier" labelpath="Title" filter="$filter=startswith(name, $key)">

                                    <label class="control-label" for="SupplierId">
                                        SupplierId
                                        <i class="fa fa-spin fa-circle-o-notch"
                                           ng-show="isBusy"></i>
                                    </label>

                                    <ui-select theme="bootstrap" ng-model="object.SupplierId"
                                               reset-search-input="false">
                                        <ui-select-match placeholder="Select or find the item">{{$select.selected.label}}</ui-select-match>
                                        <ui-select-choices repeat="item.Id as item in lookup track by $index"
                                                           refresh="refreshLookup($select.search)"
                                                           refresh-delay="0">
                                            <span>{{item.label}}</span>
                                        </ui-select-choices>
                                    </ui-select>
                                </div>
                    </tab>
                            <tab heading="Items">
                                <table class="table table-hover"
                                       ncb-listeditor
                                       target="object.Items">
                                    <thead>
                                        <tr>
                                            <th>Items</th>
                                            <th width="16px"></th>
                                        </tr>
                                    </thead>
                                    <tr ng-repeat="element in target">
                                        <td>
                                            <input class="form-control"
                                                   placeholder="Items" disabled
                                                   ng-model="element" />
                                        </td>
                                        <td>
                                            <button class="btn btn-danger"
                                                    ng-click="remove(element)">
                                                <i class="glyphicon glyphicon-remove"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <input class="form-control"
                                                   placeholder="Items"
                                                   ng-model="newItem" />
                                        </td>
                                        <td>
                                            <button class="btn btn-success"
                                                    ng-click="add()">
                                                <i class="glyphicon glyphicon-plus"></i>
                                            </button>
                                        </td>
                                    </tr>
                                </table>

                            </tab>
                            <tab heading="Attachments">
                                <table class="table table-hover"
                                       ncb-listeditor
                                       target="object.Attachments">
                                    <thead>
                                        <tr>
                                            <th>Attachments</th>
                                            <th width="16px"></th>
                                        </tr>
                                    </thead>
                                    <tr ng-repeat="element in target">
                                        <td>
                                            <input class="form-control"
                                                   placeholder="Attachments" disabled
                                                   ng-model="element" />
                                        </td>
                                        <td>
                                            <button class="btn btn-danger"
                                                    ng-click="remove(element)">
                                                <i class="glyphicon glyphicon-remove"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <input class="form-control"
                                                   placeholder="Attachments"
                                                   ng-model="newItem" />
                                        </td>
                                        <td>
                                            <button class="btn btn-success"
                                                    ng-click="add()">
                                                <i class="glyphicon glyphicon-plus"></i>
                                            </button>
                                        </td>
                                    </tr>
                                </table>

                            </tab>

                </tabset>

            </form>

            <ncb-footer>
                <button class="btn btn-primary btn-lg"
                        ng-click="data.save(object)">
                    <span ng-show="object.id == null">Create</span>
                    <span ng-show="object.id != null">Save</span>
                </button>
            </ncb-footer>
        </ncb-modal>


    </div>