@inherits NantCom.NancyBlack.NancyBlackRazorViewBase
<!DOCTYPE html>
<html>
<head>

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">

    <link rel="shortcut icon" href="/Content/favicon.ico" />
    <link rel="icon" type="image/png" href="/Content/favicon.png" />

    <title>@RenderSection("Title", false)</title>

    @if (this.RenderContext.Context.Request.Url.HostName == "localhost") // dev machine
    {
        <link href="/Content/bootstrap.min.css" rel="stylesheet" />
        <link href="/Content/bootstrap-theme.min.css" rel="stylesheet" />
        <link href="/Content/font-awesome.min.css" rel="stylesheet" />
    }
    else
    {
        <link href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.1/css/bootstrap.min.css" rel="stylesheet" />
        <link href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.1/css/bootstrap-theme.min.css" rel="stylesheet" />
        <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" />
    }

    <link href="/Content/Scripts/angular-ui-select/select.min.css" rel="stylesheet" />

    @this.Html.Raw(NantCom.NancyBlack.Configuration.ModuleResource.Css)

    @if (this.RenderContext.Context.Request.Url.Path.Contains("/Admin") == false &&
        this.RenderContext.Context.Request.Url.Path.Contains("/SuperAdmin") == false)
    {
        <link rel="stylesheet" href="@this.SitePath("/style.min.css")">
    }
    @this.RenderSection("Style", false)
    @this.RenderSection("Head", false)

    <style>
        .modal-backdrop {
            position: fixed;
        }

        /* Empty font to kill whitespace for inline-block*/
        @@font-face {
            font-family: empty;
            src: url(data:application/font-woff;charset=utf-8;base64,d09GRk9UVE8AAAQ0AAoAAAAAA+wAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABDRkYgAAAA9AAAAJ4AAACeXQ48j09TLzIAAAGUAAAAYAAAAGAIIgbWY21hcAAAAfQAAABEAAAARAAyAGlnYXNwAAACOAAAAAgAAAAIAAAAEGhlYWQAAAJAAAAANgAAADb9mzB5aGhlYQAAAngAAAAkAAAAJAHiAeVobXR4AAACnAAAABAAAAAQAAAAAG1heHAAAAKsAAAABgAAAAYABFAAbmFtZQAAArQAAAFdAAABXVqZXRlwb3N0AAAEFAAAACAAAAAgAAMAAAEABAQAAQEBDHNwYWNlLWVtcHR5AAECAAEAOvgcAvgbA/gYBB4KABlT/4uLHgoAGVP/i4sMB4tr+JT4dAUdAAAAfA8dAAAAgREdAAAACR0AAACVEgAFAQEMFxkbHnNwYWNlLWVtcHR5c3BhY2UtZW1wdHl1MHUxdTIwAAACAYkAAgAEAQEEBwoN/JQO/JQO/JQO/JQO+JQU+JQViwwKAAAAAwIAAZAABQAAAUwBZgAAAEcBTAFmAAAA9QAZAIQAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAABAAAAAIAHg/+D/4AHgACAAAAABAAAAAAAAAAAAAAAgAAAAAAACAAAAAwAAABQAAwABAAAAFAAEADAAAAAIAAgAAgAAAAEAIP/9//8AAAAAACD//f//AAH/4wADAAEAAAAAAAAAAAABAAH//wAPAAEAAAABAAAAeR2GXw889QALAgAAAAAAzz54vgAAAADPPni+AAAAAAAAAAAAAAAIAAIAAAAAAAAAAQAAAeD/4AAAAgAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAABQAAAEAAAAAAAOAK4AAQAAAAAAAQAWAAAAAQAAAAAAAgAOAGMAAQAAAAAAAwAWACwAAQAAAAAABAAWAHEAAQAAAAAABQAWABYAAQAAAAAABgALAEIAAQAAAAAACgAoAIcAAwABBAkAAQAWAAAAAwABBAkAAgAOAGMAAwABBAkAAwAWACwAAwABBAkABAAWAHEAAwABBAkABQAWABYAAwABBAkABgAWAE0AAwABBAkACgAoAIcAcwBwAGEAYwBlAC0AZQBtAHAAdAB5AFYAZQByAHMAaQBvAG4AIAAxAC4AMABzAHAAYQBjAGUALQBlAG0AcAB0AHlzcGFjZS1lbXB0eQBzAHAAYQBjAGUALQBlAG0AcAB0AHkAUgBlAGcAdQBsAGEAcgBzAHAAYQBjAGUALQBlAG0AcAB0AHkARwBlAG4AZQByAGEAdABlAGQAIABiAHkAIABJAGMAbwBNAG8AbwBuAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=) format('woff');
        }
    </style>
</head>
<body>

    @RenderBody()

    @if (this.RenderContext.Context.Request.Url.HostName == "localhost") // dev machine
    {
        <script src="/Content/Scripts/jquery-2.1.1.js"></script>
        <script src="/Content/Scripts/bootstrap.js"></script>
        <script src="/Content/Scripts/angular.js"></script>        
        <script src="/Content/Scripts/angular-animate.js"></script>
        <script src="/Content/Scripts/angular-ui/ui-bootstrap-tpls.js"></script>

        <script src="/Content/Scripts/MobileServices.Web-1.1.5.min.js"></script>
    }
    else
    {
        <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.1/js/bootstrap.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.0/angular.min.js"></script>
        <script src="/Content/Scripts/angular-animate.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.11.2/ui-bootstrap-tpls.min.js"></script>
        <script src="//ajax.aspnetcdn.com/ajax/mobileservices/MobileServices.Web-1.1.5.min.js"></script>
    }

    <!-- Angular UI Modules -->
    <script src="/Content/Scripts/angular-ui-select/select.min.js"></script>
    <script src="/Content/Scripts/angular-ui/ui-validate.js"></script>

    <!-- Thai Province List -->
    <script src="/Content/Scripts/thaiprovinces/angular-thaiprovinces.js"></script>

    <!-- Sortable UI -->
    <script src="/Content/Scripts/angular-ui-sortable/jquery-ui.min.js"></script>
    <script src="/Content/Scripts/angular-ui-sortable/angular-ui-sortable.min.js"></script>

    @this.Html.Raw(NantCom.NancyBlack.Configuration.ModuleResource.JS)

    @{
        foreach (var item in NantCom.NancyBlack.Configuration.ModuleResource.Includes)
        {
            @this.Html.Partial(item, this.Model);
        }
    }

    @RenderSection("Scripts", false)
    @RenderSection("Script", false)

    <script>
        // Querystring extraction function
        (function (n) { "use strict"; n.QueryStringParser = function (n) { var r = [], t, u, e, i, f; try { for (t = n.split("?")[1].split("#"), n = t[0], t[1] && (r["#"] = decodeURIComponent(t[1])), u = n.split("&"), e = u.length, i = 0; i < e; i++) f = u[i].split("="), r[f[0]] = decodeURIComponent(f[1]) } catch (o) { } return r }; var t = n.QueryStringParser(location.search); n.Querystring = function (n) { if (n === "#") { if (location.hash) return location.hash.substr(1) } else return t[n] } })(jQuery);
        

        // combine all ng-module into one attribute on top of the page
        // too allow all modules to function
        var modules = [];
        $("*[ng-module]").each(function () {
            var me = $(this);
            modules.push(me.attr("ng-module"));
            me.removeAttr("ng-module");
        });

        modules.push("ui.bootstrap");
        modules.push("ui.select");
        modules.push("ui.validate");
        modules.push("ngAnimate");

        $("body").attr("ng-modules",
            modules.join(",") +
            ",@this.Html.Raw(NantCom.NancyBlack.Configuration.ModuleResource.AngularModules)");

    </script>
    <script src="/Content/Scripts/angular.ngmodule.js"></script>

    @if (this.Site.FacebookAppId != null)
    {
        <script>
            window.fbAsyncInit = function () {
                FB.init({
                    appId: '@(this.Site.FacebookAppId)',
                    xfbml: true,
                    version: 'v2.2'
                });
            };

            (function (d, s, id) {
                var js, fjs = d.getElementsByTagName(s)[0];
                if (d.getElementById(id)) { return; }
                js = d.createElement(s); js.id = id;
                js.src = "//connect.facebook.net/en_US/sdk.js";
                fjs.parentNode.insertBefore(js, fjs);
            }(document, 'script', 'facebook-jssdk'));
        </script>
    }
    
    @if (this.Site.GoogleAnalyticsId != null)
    {
        <script>
            (function (i, s, o, g, r, a, m) {
                i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date(); a = s.createElement(o),
                m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
            })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

            ga('create', '@(this.Site.GoogleAnalyticsId)', 'auto');
            ga('send', 'pageview');

        </script>

    }

</body>

</html>
