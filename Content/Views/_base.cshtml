@inherits NantCom.NancyBlack.NancyBlackRazorViewBase
<!DOCTYPE html>
<html>
<head>
    @*<title>        
        @this.Model.Content.Title
        @RenderSection("Title", false)
    </title>

    @if (this.Model.Content.MetaKeywords != null)
    {
        <meta name="keywords" content="@(this.Model.Content.MetaKeywords)">
    }

    @if (this.Model.Content.MetaDescription != null)
    {
        <meta name="description" content="@(this.Model.Content.MetaDescription)">
    }*@

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">

    <link rel="apple-touch-icon" sizes="57x57" href="/__favicon/57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/__favicon/60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/__favicon/72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/__favicon/76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/__favicon/114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/__favicon/120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/__favicon/144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/__favicon/152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/__favicon/180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/__favicon/192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/__favicon/32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/__favicon/96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/__favicon/16x16.png">
    <link rel="icon" type="image/png" href="/__favicon/16x16.png">
    <link rel="shortcut icon" href="/__favicon/16x16.ico" />
    <link rel="manifest" href="/__favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/__favicon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    <link href="/Content/bootstrap.min.css" rel="stylesheet" />
    <link href="/Content/bootstrap-theme.min.css" rel="stylesheet" />
    <link href="/Content/font-awesome.min.css" rel="stylesheet" />
    <link href="/Content/ionicons/css/ionicons.min.css" rel="stylesheet" />
    <link href="/Content/Scripts/angular-ui-select/select.min.css" rel="stylesheet" />

    <!--Adding Media Queries Support for IE8-->
    <!--[if lt IE 9]>
       <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
       <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
       <script src="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script>
    <![endif]-->
    @this.Html.Raw(NantCom.NancyBlack.Configuration.ModuleResource.Css)

    @if (this.RenderContext.Context.Request.Url.Path.Contains("/Admin") == false &&
                        this.RenderContext.Context.Request.Url.Path.Contains("/SuperAdmin") == false)
    {
        <link rel="stylesheet" href="@this.SitePath("/style.min.css")">
    }
    @this.RenderSection("Style", false)
    @this.RenderSection("Head", false)

    <style>
        .modal-backdrop {
            position: fixed;
        }
    </style>

</head>
<body @(this.IsInEditMode ? "editmode" : "" )>

    @RenderBody()

    @if (this.CurrentUser != null)
    {
        <script>

            // automatically set current user info into window variable
            window.currentUser =  @this.Html.Raw( this.GetJson( this.CurrentUser ) );

        </script>
    }

    @if (this.IsInEditMode == true)
    {
        <script>

            // automatically set current model into window variable
            window.model =  @this.Html.Raw( this.GetJson( this.Model ) );

        </script>
    }

    <!-- String Format -->
    <script src="/Content/Scripts/stringformat/stringformat-1.09.min.js"></script>

    <script src="/Content/Scripts/jquery-2.1.1.js"></script>
    <script src="/Content/Scripts/bootstrap.js"></script>
    <script src="/Content/Scripts/angular.js"></script>
    <script src="/Content/Scripts/angular-animate.js"></script>
    <script src="/Content/Scripts/angular-sanitize.js"></script>
    <script src="/Content/Scripts/angular-cookies.min.js"></script>
    <script src="/Content/Scripts/angular-ui/ui-bootstrap-tpls.js"></script>
    <script src="/Content/Scripts/MobileServices.Web-1.2.5.min.js"></script>

    <!-- Angular UI Modules -->
    <script src="/Content/Scripts/angular-ui-select/select.min.js"></script>
    <script src="/Content/Scripts/angular-ui/ui-validate.js"></script>

    @this.Html.Raw(NantCom.NancyBlack.Configuration.ModuleResource.JS)

    @{
        foreach (var item in NantCom.NancyBlack.Configuration.ModuleResource.Includes)
        {
            @this.Html.Partial(item, this.Model);
        }
    }

    @RenderSection("Scripts", false)
    @RenderSection("Script", false)

    <script>

        $(document).ready( function() {
            
            // base modules
            var modules = [
                "ui.bootstrap",
                "ui.select",
                "ui.validate",
                "ngAnimate",
                "ngSanitize",
                "ngCookies",
            ];

            // ncb modules
            var systemModules = @this.Html.Raw( this.GetJson( NantCom.NancyBlack.Configuration.ModuleResource.AngularModules) );
            modules = modules.concat( systemModules );

            $("*[ng-module]").each(function () {
                var me = $(this);
                modules.push(me.attr("ng-module"));
                me.removeAttr("ng-module");
            });

            angular.bootstrap($("body"), modules);
        });
    </script>

    @if (this.Site.FacebookAppId != null)
    {
        <script>
            window.fbAsyncInit = function () {
                FB.init({
                    appId: '@(this.Site.FacebookAppId)',
                    xfbml: true,
                    version: 'v2.2'
                });
            };

            (function (d, s, id) {
                var js, fjs = d.getElementsByTagName(s)[0];
                if (d.getElementById(id)) { return; }
                js = d.createElement(s); js.id = id;
                js.src = "//connect.facebook.net/en_US/sdk.js";
                fjs.parentNode.insertBefore(js, fjs);
            }(document, 'script', 'facebook-jssdk'));
        </script>
    }

    @if (this.Site.GoogleAnalyticsId != null)
    {
        <script>
            (function (i, s, o, g, r, a, m) {
                i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date(); a = s.createElement(o),
                m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
            })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

            ga('create', '@(this.Site.GoogleAnalyticsId)', 'auto');
            ga('send', 'pageview');

        </script>

    }

</body>

</html>
