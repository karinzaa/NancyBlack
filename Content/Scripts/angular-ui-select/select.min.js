/*!
 * ui-select
 * http://github.com/angular-ui/ui-select
 * Version: 0.8.2 - 2014-10-09T23:29:49.713Z
 * License: MIT
 */
(function(){"use strict";var n={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,COMMAND:91,isControl:function(t){var i=t.which;switch(i){case n.COMMAND:case n.SHIFT:case n.CTRL:case n.ALT:return!0}return t.metaKey?!0:!1},isFunctionKey:function(n){return n=n.which?n.which:n,n>=112&&n<=123},isVerticalMovement:function(t){return~[n.UP,n.DOWN].indexOf(t)},isHorizontalMovement:function(t){return~[n.LEFT,n.RIGHT,n.BACKSPACE,n.DELETE].indexOf(t)}};angular.element.prototype.querySelectorAll===undefined&&(angular.element.prototype.querySelectorAll=function(n){return angular.element(this[0].querySelectorAll(n))});angular.module("ui.select",[]).constant("uiSelectConfig",{theme:"bootstrap",searchEnabled:!0,placeholder:"",refreshDelay:1e3}).service("uiSelectMinErr",function(){var n=angular.$$minErr("ui.select");return function(){var t=n.apply(this,arguments),i=t.message.replace(new RegExp("\nhttp://errors.angularjs.org/.*"),"");return new Error(i)}}).service("RepeatParser",["uiSelectMinErr","$parse",function(n,t){var i=this;i.parse=function(i){var r=i.match(/^\s*(?:([\s\S]+?)\s+as\s+)?([\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!r)throw n("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",i);return{itemName:r[2],source:t(r[3]),trackByExp:r[4],modelMapper:t(r[1]||r[2])}};i.getGroupNgRepeatExpression=function(){return"$group in $select.groups"};i.getNgRepeatExpression=function(n,t,i,r){var u=n+" in "+(r?"$group.items":t);return i&&(u+=" track by "+i),u}}]).controller("uiSelectCtrl",["$scope","$element","$timeout","RepeatParser","uiSelectMinErr",function(t,i,r,u,f){function c(){e.resetSearchInput&&(e.search=h,e.selected&&e.items.length&&!e.multiple&&(e.activeIndex=e.items.indexOf(e.selected)))}function l(t){var i=!0;switch(t){case n.DOWN:!e.open&&e.multiple?e.activate(!1,!0):e.activeIndex<e.items.length-1&&e.activeIndex++;break;case n.UP:!e.open&&e.multiple?e.activate(!1,!0):e.activeIndex>0&&e.activeIndex--;break;case n.TAB:(!e.multiple||e.open)&&e.select(e.items[e.activeIndex],!0);break;case n.ENTER:e.open?e.select(e.items[e.activeIndex]):e.activate(!1,!0);break;case n.ESC:e.close();break;default:i=!1}return i}function a(t){function l(){switch(t){case n.LEFT:return~e.activeMatchIndex?f:i;case n.RIGHT:return~e.activeMatchIndex&&r!==i?c:(e.activate(),!1);case n.BACKSPACE:return~e.activeMatchIndex?(e.removeChoice(r),f):i;case n.DELETE:return~e.activeMatchIndex?(e.removeChoice(e.activeMatchIndex),r):!1}}var s=v(o[0]),h=e.selected.length,i=h-1,r=e.activeMatchIndex,c=e.activeMatchIndex+1,f=e.activeMatchIndex-1,u=r;return s>0||e.search.length&&t==n.RIGHT?!1:(e.close(),u=l(),e.activeMatchIndex=e.selected.length&&u!==!1?Math.min(i,Math.max(0,u)):-1,!0)}function v(n){return angular.isNumber(n.selectionStart)?n.selectionStart:n.value.length}function y(){var n=i.querySelectorAll(".ui-select-choices-content"),u=n.querySelectorAll(".ui-select-choices-row");if(u.length<1)throw f("choices","Expected multiple .ui-select-choices-row but got '{0}'.",u.length);var t=u[e.activeIndex],r=t.offsetTop+t.clientHeight-n[0].scrollTop,o=n[0].offsetHeight;r>o?n[0].scrollTop+=r-o:r<t.clientHeight&&(e.isGrouped&&e.activeIndex===0?n[0].scrollTop=0:n[0].scrollTop-=t.clientHeight-r)}var e=this,h="",o,s;if(e.placeholder=undefined,e.search=h,e.activeIndex=0,e.activeMatchIndex=-1,e.items=[],e.selected=undefined,e.open=!1,e.focus=!1,e.focusser=undefined,e.disabled=undefined,e.searchEnabled=undefined,e.resetSearchInput=undefined,e.refreshDelay=undefined,e.multiple=!1,e.disableChoiceExpression=undefined,e.isEmpty=function(){return angular.isUndefined(e.selected)||e.selected===null||e.selected===""},o=i.querySelectorAll("input.ui-select-search"),o.length!==1)throw f("searchInput","Expected 1 input.ui-select-search but got '{0}'.",o.length);e.activate=function(n,t){e.disabled||e.open||(t||c(),e.focusser.prop("disabled",!0),e.open=!0,e.activeMatchIndex=-1,e.activeIndex=e.activeIndex>=e.items.length?0:e.activeIndex,r(function(){e.search=n||e.search;o[0].focus()}))};e.findGroupByName=function(n){return e.groups&&e.groups.filter(function(t){return t.name===n})[0]};e.parseRepeatAttr=function(n,i){function o(n){e.groups=[];angular.forEach(n,function(n){var r=t.$eval(i),u=angular.isFunction(r)?r(n):n[r],f=e.findGroupByName(u);f?f.items.push(n):e.groups.push({name:u,items:[n]})});e.items=[];e.groups.forEach(function(n){e.items=e.items.concat(n.items)})}function s(n){e.items=n}var r=i?o:s;e.parserResult=u.parse(n);e.isGrouped=!!i;e.itemProperty=e.parserResult.itemName;t.$watchCollection(e.parserResult.source,function(n){if(n===undefined||n===null)e.items=[];else if(angular.isArray(n)){if(e.multiple){var t=n.filter(function(n){return e.selected.indexOf(n)<0});r(t)}else r(n);e.ngModel.$modelValue=null}else throw f("items","Expected an array but got '{0}'.",n);});e.multiple&&t.$watchCollection("$select.selected",function(n){var i=e.parserResult.source(t),u;n.length?(u=i.filter(function(t){return n.indexOf(t)<0}),r(u)):r(i);e.sizeSearchInput()})};e.refresh=function(n){n!==undefined&&(s&&r.cancel(s),s=r(function(){t.$eval(n)},e.refreshDelay))};e.setActiveItem=function(n){e.activeIndex=e.items.indexOf(n)};e.isActive=function(n){return e.open&&e.items.indexOf(n[e.itemProperty])===e.activeIndex};e.isDisabled=function(n){if(e.open){var i=e.items.indexOf(n[e.itemProperty]),t=!1,r;return i>=0&&!angular.isUndefined(e.disableChoiceExpression)&&(r=e.items[i],t=!!n.$eval(e.disableChoiceExpression),r._uiSelectChoiceDisabled=t),t}};e.select=function(n,i){if(n===undefined||!n._uiSelectChoiceDisabled){var r={};r[e.parserResult.itemName]=n;e.onSelectCallback(t,{$item:n,$model:e.parserResult.modelMapper(t,r)});e.multiple?(e.selected.push(n),e.sizeSearchInput()):e.selected=n;e.close(i)}};e.close=function(n){e.open&&(c(),e.open=!1,e.multiple||r(function(){e.focusser.prop("disabled",!1);n||e.focusser[0].focus()},0,!1))};e.toggle=function(n){e.open?e.close():e.activate();n.preventDefault();n.stopPropagation()};e.removeChoice=function(n){var i=e.selected[n],r={};r[e.parserResult.itemName]=i;e.selected.splice(n,1);e.activeMatchIndex=-1;e.sizeSearchInput();e.onRemoveCallback(t,{$item:i,$model:e.parserResult.modelMapper(t,r)})};e.getPlaceholder=function(){if(!e.multiple||!e.selected.length)return e.placeholder};e.sizeSearchInput=function(){var t=o[0],n=o.parent().parent()[0];o.css("width","10px");r(function(){var i=n.clientWidth-t.offsetLeft-10;i<50&&(i=n.clientWidth);o.css("width",i+"px")},0,!1)};o.on("keydown",function(i){var r=i.which;t.$apply(function(){var t=!1;e.multiple&&n.isHorizontalMovement(r)&&(t=a(r));!t&&e.items.length>0&&(t=l(r));t&&r!=n.TAB&&(i.preventDefault(),i.stopPropagation())});n.isVerticalMovement(r)&&e.items.length>0&&y()});o.on("blur",function(){r(function(){e.activeMatchIndex=-1})});t.$on("$destroy",function(){o.off("keydown blur")})}]).directive("uiSelect",["$document","uiSelectConfig","uiSelectMinErr","$compile","$parse",function(t,i,r,u,f){return{restrict:"EA",templateUrl:function(n,t){var r=t.theme||i.theme;return r+(angular.isDefined(t.multiple)?"/select-multiple.tpl.html":"/select.tpl.html")},replace:!0,transclude:!0,require:["uiSelect","ngModel"],scope:!0,controller:"uiSelectCtrl",controllerAs:"$select",link:function(i,e,o,s,h){function v(n){var t=!1;t=window.jQuery?window.jQuery.contains(e[0],n.target):e[0].contains(n.target);t||(c.close(),i.$digest())}var c=s[0],l=s[1],y=e.querySelectorAll("input.ui-select-search"),a;c.multiple=angular.isDefined(o.multiple)?o.multiple===""?!0:o.multiple.toLowerCase()==="true":!1;c.onSelectCallback=f(o.onSelect);c.onRemoveCallback=f(o.onRemove);l.$parsers.unshift(function(n){var t={},f,u,r;if(c.multiple){for(u=[],r=c.selected.length-1;r>=0;r--)t={},t[c.parserResult.itemName]=c.selected[r],f=c.parserResult.modelMapper(i,t),u.unshift(f);return u}return t={},t[c.parserResult.itemName]=n,c.parserResult.modelMapper(i,t)});l.$formatters.unshift(function(n){var t=c.parserResult.source(i,{$select:{search:""}}),f={},e,o,s,r,h,u;if(t){if(c.multiple){if(o=[],s=function(n,t){if(n&&n.length){for(var r=n.length-1;r>=0;r--)if(f[c.parserResult.itemName]=n[r],e=c.parserResult.modelMapper(i,f),e==t)return o.unshift(n[r]),!0;return!1}},!n)return o;for(r=n.length-1;r>=0;r--)s(c.selected,n[r])||s(t,n[r]);return o}if(h=function(t){return f[c.parserResult.itemName]=t,e=c.parserResult.modelMapper(i,f),e==n},c.selected&&h(c.selected))return c.selected;for(u=t.length-1;u>=0;u--)if(h(t[u]))return t[u]}return n});c.ngModel=l;a=angular.element("<input ng-disabled='$select.disabled' class='ui-select-focusser ui-select-offscreen' type='text' aria-haspopup='true' role='button' />");o.tabindex&&o.$observe("tabindex",function(n){c.multiple?y.attr("tabindex",n):a.attr("tabindex",n);e.removeAttr("tabindex")});u(a)(i);c.focusser=a;c.multiple||(e.append(a),a.bind("focus",function(){i.$evalAsync(function(){c.focus=!0})}),a.bind("blur",function(){i.$evalAsync(function(){c.focus=!1})}),a.bind("keydown",function(t){if(t.which===n.BACKSPACE){t.preventDefault();t.stopPropagation();c.select(undefined);i.$apply();return}t.which===n.TAB||n.isControl(t)||n.isFunctionKey(t)||t.which===n.ESC||((t.which==n.DOWN||t.which==n.UP||t.which==n.ENTER||t.which==n.SPACE)&&(t.preventDefault(),t.stopPropagation(),c.activate()),i.$digest())}),a.bind("keyup input",function(t){t.which===n.TAB||n.isControl(t)||n.isFunctionKey(t)||t.which===n.ESC||t.which==n.ENTER||t.which===n.BACKSPACE||(c.activate(a.val()),a.val(""),i.$digest())}));i.$watch("searchEnabled",function(){var n=i.$eval(o.searchEnabled);c.searchEnabled=n!==undefined?n:!0});o.$observe("disabled",function(){c.disabled=o.disabled!==undefined?o.disabled:!1});o.$observe("resetSearchInput",function(){var n=i.$eval(o.resetSearchInput);c.resetSearchInput=n!==undefined?n:!0});c.multiple?(i.$watchCollection("$select.selected",function(){l.$setViewValue(Date.now())}),a.prop("disabled",!0)):i.$watch("$select.selected",function(n){l.$viewValue!==n&&l.$setViewValue(n)});l.$render=function(){if(c.multiple&&!angular.isArray(l.$viewValue))if(angular.isUndefined(l.$viewValue)||l.$viewValue===null)c.selected=[];else throw r("multiarr","Expected model value to be array but got '{0}'",l.$viewValue);c.selected=l.$viewValue};t.on("click",v);i.$on("$destroy",function(){t.off("click",v)});h(i,function(n){var u=angular.element("<div>").append(n),i=u.querySelectorAll(".ui-select-match"),t;if(i.removeAttr("ui-select-match"),i.length!==1)throw r("transcluded","Expected 1 .ui-select-match but got '{0}'.",i.length);if(e.querySelectorAll(".ui-select-match").replaceWith(i),t=u.querySelectorAll(".ui-select-choices"),t.removeAttr("ui-select-choices"),t.length!==1)throw r("transcluded","Expected 1 .ui-select-choices but got '{0}'.",t.length);e.querySelectorAll(".ui-select-choices").replaceWith(t)})}}}]).directive("uiSelectChoices",["uiSelectConfig","RepeatParser","uiSelectMinErr","$compile",function(n,t,i,r){return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(t){var i=t.parent().attr("theme")||n.theme;return i+"/choices.tpl.html"},compile:function(u,f){if(!f.repeat)throw i("repeat","Expected 'repeat' expression.");return function(u,f,e,o,s){var a=e.groupBy,h,c,l;if(o.parseRepeatAttr(e.repeat,a),o.disableChoiceExpression=e.uiDisableChoice,a){if(h=f.querySelectorAll(".ui-select-choices-group"),h.length!==1)throw i("rows","Expected 1 .ui-select-choices-group but got '{0}'.",h.length);h.attr("ng-repeat",t.getGroupNgRepeatExpression())}if(c=f.querySelectorAll(".ui-select-choices-row"),c.length!==1)throw i("rows","Expected 1 .ui-select-choices-row but got '{0}'.",c.length);if(c.attr("ng-repeat",t.getNgRepeatExpression(o.parserResult.itemName,"$select.items",o.parserResult.trackByExp,a)).attr("ng-mouseenter","$select.setActiveItem("+o.parserResult.itemName+")").attr("ng-click","$select.select("+o.parserResult.itemName+")"),l=f.querySelectorAll(".ui-select-choices-row-inner"),l.length!==1)throw i("rows","Expected 1 .ui-select-choices-row-inner but got '{0}'.",l.length);l.attr("uis-transclude-append","");r(f,s)(u);u.$watch("$select.search",function(n){n&&!o.open&&o.multiple&&o.activate(!1,!0);o.activeIndex=0;o.refresh(e.refresh)});e.$observe("refreshDelay",function(){var t=u.$eval(e.refreshDelay);o.refreshDelay=t!==undefined?t:n.refreshDelay})}}}}]).directive("uisTranscludeAppend",function(){return{link:function(n,t,i,r,u){u(n,function(n){t.append(n)})}}}).directive("uiSelectMatch",["uiSelectConfig",function(n){return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(t){var i=t.parent().attr("theme")||n.theme,r=t.parent().attr("multiple");return i+(r?"/match-multiple.tpl.html":"/match.tpl.html")},link:function(t,i,r,u){r.$observe("placeholder",function(t){u.placeholder=t!==undefined?t:n.placeholder});u.multiple&&u.sizeSearchInput()}}}]).filter("highlight",function(){function n(n){return n.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(t,i){return i&&t?t.replace(new RegExp(n(i),"gi"),'<span class="ui-select-highlight">$&<\/span>'):t}})})();angular.module("ui.select").run(["$templateCache",function(n){n.put("bootstrap/choices.tpl.html",'<ul class="ui-select-choices ui-select-choices-content dropdown-menu" role="menu" aria-labelledby="dLabel" ng-show="$select.items.length > 0"><li class="ui-select-choices-group"><div class="divider" ng-show="$select.isGrouped && $index > 0"><\/div><div ng-show="$select.isGrouped" class="ui-select-choices-group-label dropdown-header">{{$group.name}}<\/div><div class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}"><a href="javascript:void(0)" class="ui-select-choices-row-inner"><\/a><\/div><\/li><\/ul>');n.put("bootstrap/match-multiple.tpl.html",'<span class="ui-select-match"><span ng-repeat="$item in $select.selected"><span style="margin-right: 3px;" class="ui-select-match-item btn btn-default btn-xs" tabindex="-1" type="button" ng-disabled="$select.disabled" ng-click="$select.activeMatchIndex = $index;" ng-class="{\'btn-primary\':$select.activeMatchIndex === $index}"><span class="close ui-select-match-close" ng-hide="$select.disabled" ng-click="$select.removeChoice($index)">&nbsp;&times;<\/span> <span uis-transclude-append=""><\/span><\/span><\/span><\/span>');n.put("bootstrap/match.tpl.html",'<button type="button" class="btn btn-default form-control ui-select-match" tabindex="-1" ng-hide="$select.open" ng-disabled="$select.disabled" ng-class="{\'btn-default-focus\':$select.focus}" ;="" ng-click="$select.activate()"><span ng-show="$select.searchEnabled && $select.isEmpty()" class="text-muted">{{$select.placeholder}}<\/span> <span ng-hide="$select.isEmpty()" ng-transclude=""><\/span> <span class="caret ui-select-toggle" ng-click="$select.toggle($event)"><\/span><\/button>');n.put("bootstrap/select-multiple.tpl.html",'<div class="ui-select-multiple ui-select-bootstrap dropdown form-control" ng-class="{open: $select.open}"><div><div class="ui-select-match"><\/div><input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="ui-select-search input-xs" placeholder="{{$select.getPlaceholder()}}" ng-disabled="$select.disabled" ng-hide="$select.disabled" ng-click="$select.activate()" ng-model="$select.search"><\/div><div class="ui-select-choices"><\/div><\/div>');n.put("bootstrap/select.tpl.html",'<div class="ui-select-bootstrap dropdown" ng-class="{open: $select.open}"><div class="ui-select-match"><\/div><input type="text" autocomplete="off" tabindex="-1" class="form-control ui-select-search" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-show="$select.searchEnabled && $select.open"><div class="ui-select-choices"><\/div><\/div>');n.put("select2/choices.tpl.html",'<ul class="ui-select-choices ui-select-choices-content select2-results"><li class="ui-select-choices-group" ng-class="{\'select2-result-with-children\': $select.isGrouped}"><div ng-show="$select.isGrouped" class="ui-select-choices-group-label select2-result-label">{{$group.name}}<\/div><ul ng-class="{\'select2-result-sub\': $select.isGrouped, \'select2-result-single\': !$select.isGrouped}"><li class="ui-select-choices-row" ng-class="{\'select2-highlighted\': $select.isActive(this), \'select2-disabled\': $select.isDisabled(this)}"><div class="select2-result-label ui-select-choices-row-inner"><\/div><\/li><\/ul><\/li><\/ul>');n.put("select2/match-multiple.tpl.html",'<span class="ui-select-match"><li class="ui-select-match-item select2-search-choice" ng-repeat="$item in $select.selected" ng-class="{\'select2-search-choice-focus\':$select.activeMatchIndex === $index}"><span uis-transclude-append=""><\/span> <a href="javascript:;" class="ui-select-match-close select2-search-choice-close" ng-click="$select.removeChoice($index)" tabindex="-1"><\/a><\/li><\/span>');n.put("select2/match.tpl.html",'<a class="select2-choice ui-select-match" ng-class="{\'select2-default\': $select.isEmpty()}" ng-click="$select.activate()"><span ng-show="$select.searchEnabled && $select.isEmpty()" class="select2-chosen">{{$select.placeholder}}<\/span> <span ng-hide="$select.isEmpty()" class="select2-chosen" ng-transclude=""><\/span> <span class="select2-arrow ui-select-toggle" ng-click="$select.toggle($event)"><b><\/b><\/span><\/a>');n.put("select2/select-multiple.tpl.html",'<div class="ui-select-multiple select2 select2-container select2-container-multi" ng-class="{\'select2-container-active select2-dropdown-open\': $select.open,\n                \'select2-container-disabled\': $select.disabled}"><ul class="select2-choices"><span class="ui-select-match"><\/span><li class="select2-search-field"><input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="select2-input ui-select-search" placeholder="{{$select.getPlaceholder()}}" ng-disabled="$select.disabled" ng-hide="$select.disabled" ng-model="$select.search" ng-click="$select.activate()" style="width: 34px;"><\/li><\/ul><div class="select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open}"><div class="ui-select-choices"><\/div><\/div><\/div>');n.put("select2/select.tpl.html",'<div class="select2 select2-container" ng-class="{\'select2-container-active select2-dropdown-open\': $select.open,\n                \'select2-container-disabled\': $select.disabled,\n                \'select2-container-active\': $select.focus }"><div class="ui-select-match"><\/div><div class="select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open}"><div class="select2-search" ng-show="$select.searchEnabled"><input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="ui-select-search select2-input" ng-model="$select.search"><\/div><div class="ui-select-choices"><\/div><\/div><\/div>');n.put("selectize/choices.tpl.html",'<div ng-show="$select.open" class="ui-select-choices selectize-dropdown single"><div class="ui-select-choices-content selectize-dropdown-content"><div class="ui-select-choices-group optgroup"><div ng-show="$select.isGrouped" class="ui-select-choices-group-label optgroup-header">{{$group.name}}<\/div><div class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}"><div class="option ui-select-choices-row-inner" data-selectable=""><\/div><\/div><\/div><\/div><\/div>');n.put("selectize/match.tpl.html",'<div ng-hide="$select.searchEnabled && ($select.open || $select.isEmpty())" class="ui-select-match" ng-transclude=""><\/div>');n.put("selectize/select.tpl.html",'<div class="selectize-control single"><div class="selectize-input" ng-class="{\'focus\': $select.open, \'disabled\': $select.disabled, \'selectize-focus\' : $select.focus}" ng-click="$select.activate()"><div class="ui-select-match"><\/div><input type="text" autocomplete="off" tabindex="-1" class="ui-select-search ui-select-toggle" ng-click="$select.toggle($event)" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-hide="!$select.searchEnabled || ($select.selected && !$select.open)" ng-disabled="$select.disabled"><\/div><div class="ui-select-choices"><\/div><\/div>')}]);